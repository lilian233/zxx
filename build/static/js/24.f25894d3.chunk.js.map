{"version":3,"sources":["scripts/views/chat/index.js"],"names":["customEmoticon","timestamp","Date","userInfo","avatar","name","userId","value","error","MyChat","observer","state","inputValue","messages","getTime","setInputfoucs","chat","refs","input","inputFocus","setScrollTop","message","sendMessage","v","push","setState","console","log","this","JSON","parse","localStorage","mobile","pic","title","show","search","ref","el","className","dataSource","placeholder","messageListStyle","width","height","window","outerHeight","Component"],"mappings":"qPAMMA,EAAiB,CAAC,CACpBC,UAAW,IAAIC,KACfC,SAAU,CACNC,OAAQ,8BACRC,KAAM,2BACNC,OAAQ,iBAEZC,MAAO,iFACPC,OAAO,IAGLC,EADLC,Y,6MAEGC,MAAQ,CACJC,WAAY,GACZC,SAAU,GACVZ,WAAW,IAAIC,MAAOY,W,EAE1BC,cAAgB,WACZ,EAAKC,KAAKC,KAAKC,MAAMC,c,EAEzBC,aAAe,WACX,EAAKJ,KAAKC,KAAKI,QAAQD,aAAa,O,EAExCE,YAAc,SAACC,GAEX,GADkBA,EAAVhB,MACR,CAC0B,EAAKI,MAAvBE,SACRb,EAAewB,KAAKD,GACpB,EAAKE,SAAS,CAAEzB,iBAAgBC,WAAW,IAAIC,MAAOY,UAAWF,WAAY,KAC7Ec,QAAQC,IAAI3B,K,wEAEN,IAAD,SAE6C4B,KAAKjB,MAAnCX,GAFf,EAEGY,WAFH,EAEeZ,gBAFf,KAE+BC,UAKhC4B,KAAKC,MAAMC,aAAa5B,WAHxB6B,EAJC,EAIDA,OAIE7B,EAAW,CACbC,OATC,EAKD6B,IAKA3B,OAAQ0B,EACR3B,KAAM2B,GAGV,OADAN,QAAQC,IAAIK,GAER,6BACI,kBAAC,IAAD,CAAME,MAAM,2BAAOC,MAAM,EAAMC,QAAQ,IAGvC,kBAAC,IAAD,CACIC,IAAK,SAAAC,GAAE,OAAI,EAAKtB,KAAOsB,GACvBC,UAAU,cACVC,WAAYxC,EACZG,SAAUA,EACVI,MAAOqB,KAAKjB,MAAMC,WAClBU,YAAaM,KAAKN,YAClBrB,UAAW2B,KAAKjB,MAAMV,UACtBwC,YAAY,qBACZC,iBAAkB,CAAEC,MAAO,OAAQC,OAAQC,OAAOC,oB,GAhDjDC,e,EAwDNtC","file":"static/js/24.f25894d3.chunk.js","sourcesContent":["import \"./index.scss\"\r\nimport React, { Component } from \"react\"\r\nimport Head from \"~/components/head\"\r\nimport Chat from 'chat-react';\r\nimport { observer } from \"mobx-react\"\r\n\r\nconst customEmoticon = [{\r\n    timestamp: new Date(),\r\n    userInfo: {\r\n        avatar: \"http://img.binlive.cn/6.png\",\r\n        name: \"系统客服\",\r\n        userId: \"1544365758856\"\r\n    },\r\n    value: \"您好，请问有什么可以帮您？\",\r\n    error: true //设置消息状态为失败，显示错误状态图标\r\n}]\r\n@observer\r\nclass MyChat extends Component {\r\n    state = {\r\n        inputValue: '',\r\n        messages: [],\r\n        timestamp: new Date().getTime()\r\n    }\r\n    setInputfoucs = () => {\r\n        this.chat.refs.input.inputFocus();  //set input foucus\r\n    }\r\n    setScrollTop = () => {\r\n        this.chat.refs.message.setScrollTop(1200);  //set scrollTop position\r\n    }\r\n    sendMessage = (v) => {\r\n        const { value } = v;\r\n        if (!value) return;\r\n        const { messages = [] } = this.state;\r\n        customEmoticon.push(v);\r\n        this.setState({ customEmoticon, timestamp: new Date().getTime(), inputValue: '' });\r\n        console.log(customEmoticon)\r\n    }\r\n    render() {\r\n\r\n        const { inputValue, customEmoticon, timestamp } = this.state;\r\n        const{\r\n            mobile,\r\n            pic\r\n\r\n        } = JSON.parse(localStorage.userInfo)\r\n        const userInfo = {\r\n            avatar: pic,\r\n            userId: mobile,\r\n            name: mobile\r\n        }\r\n        console.log(mobile)\r\n        return (\r\n            <div>\r\n                <Head title=\"联系客服\" show={true} search={true}></Head>\r\n                \r\n\r\n                <Chat\r\n                    ref={el => this.chat = el}\r\n                    className=\"my-chat-box\"\r\n                    dataSource={customEmoticon}\r\n                    userInfo={userInfo}\r\n                    value={this.state.inputValue}\r\n                    sendMessage={this.sendMessage}\r\n                    timestamp={this.state.timestamp}\r\n                    placeholder=\"请输入\"\r\n                    messageListStyle={{ width: '100%', height: window.outerHeight }}\r\n                />\r\n\r\n            </div>\r\n\r\n        )\r\n    }\r\n}\r\nexport default MyChat"],"sourceRoot":""}
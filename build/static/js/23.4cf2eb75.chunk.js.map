{"version":3,"sources":["scripts/mobx/shopcar.js","scripts/views/collection/index.js"],"names":["Shopcar","carTotal","this","carList","forEach","item","count","total","checked","price","yh","data","totalcount","checkedList","carNum","quan","newVal","map","observable","value","label","title","msg1","msg2","action","url","a","async","axios","get","res","result","console","log","collectionList","post","then","filter","id","susult","flag","computed","Collection","observer","onClick","shopcar","delCollection","getCollectionList","show","search","className","good","i","key","src","image","alt","name","sellCount","Component"],"mappings":"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","file":"static/js/23.4cf2eb75.chunk.js","sourcesContent":["import { observable, action, computed, autorun } from \"mobx\"\r\nimport { axios } from \"&\"\r\nclass Shopcar {\r\n    @observable carList = [];  // 购物车数据 \r\n    // @observable carNum = 10;     // 购物车选中数量 \r\n    // @observable carTotal = 18;   // 购物车总数量 \r\n    @observable checkedList = [];\r\n    @observable collectionList = [];\r\n    // 结算购物车数据 \r\n    @observable data = [\r\n        {\r\n            value: 0, label: 'doctor', price: 10, title: '仅限普通花束使用',\r\n            msg1: '限2020-01-10至2020-02-31使用', msg2: '满300元可使用'\r\n        },\r\n        {\r\n            value: 1, label: 'bachelor', price: 10, title: '仅限普通花束使用',\r\n            msg1: '限2020-01-11至2020-02-31使用', msg2: '满300元可使用'\r\n        },\r\n    ];\r\n    @action getCarList = async (url) => {\r\n        const res = await axios.get(url);\r\n        this.carList = res.data.result;\r\n        console.log(this.carList)\r\n    }\r\n    @action getCollectionList = async (url) => {\r\n        const res = await axios.get(url);\r\n        this.collectionList = res.data.result;\r\n        console.log(this.collectionList)\r\n    }\r\n    @action delSelect = () => {\r\n        axios.post(\"/react/delSelect\").then(res => {\r\n            this.carList = this.carList.filter(item => !item.checked);\r\n        })\r\n\r\n    }\r\n    @action delCollection = (id) => {\r\n        axios.post(\"/react/delCollection\", { id }).then(res => {\r\n            this.collectionList = res.data.susult\r\n        })\r\n\r\n    }\r\n    @action changeOneCount = (id, flag) => {\r\n\r\n        axios.post(\"/react/changeCount\", {\r\n            id,\r\n            flag\r\n        }).then(res => {\r\n            this.carList = this.carList.map((item) => {\r\n                if (item.id == id) {\r\n                    item.count += flag ? 1 : -1;\r\n                }\r\n                return item;\r\n            })\r\n        })\r\n    }\r\n\r\n    @action changeOneCountNum = (id, count) => {\r\n        axios.post(\"/react/changeCount\", {\r\n            id,\r\n            count\r\n        }).then(res => {\r\n            this.carList = this.carList.map((item) => {\r\n                if (item.id == id) {\r\n                    item.count = count;\r\n                }\r\n                return item;\r\n            })\r\n        })\r\n    }\r\n\r\n    @action changeOneChecked = (checked, id) => {\r\n        axios.post(\"/react/changeChecked\", {\r\n            checked,\r\n            id\r\n        }).then(res => {\r\n            this.carList = this.carList.map((item) => {\r\n                if (item.id == id) {\r\n                    item.checked = checked\r\n                }\r\n                return item;\r\n            })\r\n        })\r\n\r\n    }\r\n    @action getChecked = () => {\r\n        axios.get(\"/react/getChecked\").then(res => {\r\n            // this.carList = this.carList.map((item)=>{\r\n            //     if(item.id==id){\r\n            //         item.checked = checked\r\n            //     }\r\n            //     return item;\r\n            // })\r\n            this.checkedList = res.data.result\r\n\r\n        })\r\n\r\n    }\r\n\r\n    @action changeQuan = checked => {\r\n        axios.post(\"/react/changeChecked\", {\r\n            checked,\r\n        }).then(res => {\r\n            this.quan = checked;\r\n        })\r\n\r\n    }\r\n    @computed get carTotal() {\r\n        var carTotal = 0;\r\n        this.carList.forEach((item) => {\r\n            carTotal += item.count;\r\n        })\r\n        return carTotal;\r\n    }\r\n    @computed get total() {\r\n        var total = 0;\r\n        this.carList.forEach((item) => {\r\n            if (item.checked) {\r\n                total += item.count * item.price;\r\n            }\r\n        })\r\n        return total;\r\n    }\r\n    @computed get yhq() {\r\n        var yh = 0;\r\n        this.data.forEach((item) => {\r\n\r\n            yh = item.price;\r\n\r\n        })\r\n        return yh;\r\n    }\r\n    @computed get totalcount() {\r\n        var totalcount = 0;\r\n        this.checkedList.forEach((item) => {\r\n            if (item.checked) {\r\n                totalcount += item.count * item.price;\r\n            }\r\n        })\r\n        return totalcount;\r\n    }\r\n    @computed get carNum() {\r\n        var carNum = 0;\r\n        this.carList.forEach((item) => {\r\n            if (item.checked) {\r\n                carNum += item.count;\r\n            }\r\n        })\r\n        return carNum;\r\n    }\r\n    @computed get quan() {\r\n        var quan = true;\r\n        this.carList.forEach(item => {\r\n            if (!item.checked) {\r\n                quan = false;\r\n            }\r\n        })\r\n        return quan;\r\n    }\r\n\r\n    set quan(newVal) {\r\n        this.carList = this.carList.map((item) => {\r\n            item.checked = newVal;\r\n            return item;\r\n        })\r\n    }\r\n}\r\nexport default new Shopcar()","import \"./index.scss\"\r\nimport React, { Component } from \"react\"\r\nimport Head from \"~/components/head\"\r\nimport shopcar from \"~/mobx/shopcar\"\r\nimport { observer } from \"mobx-react\"\r\nimport {\r\n    List,\r\n    Card, WingBlank, WhiteSpace,\r\n    Button,\r\n    TextareaItem,\r\n    Radio,\r\n\r\n} from \"antd-mobile\"\r\n\r\nimport moment from 'moment';\r\n\r\n@observer\r\nclass Collection extends Component {\r\n    componentDidMount() {\r\n        const {\r\n            collectionList\r\n        } = shopcar\r\n\r\n\r\n        shopcar.getCollectionList(\"/react/getCollectionList\");\r\n\r\n\r\n    }\r\n    onClick = (id) => {\r\n        console.log(id)\r\n        shopcar.delCollection(id)\r\n    }\r\n    render() {\r\n        const {\r\n            collectionList\r\n        } = shopcar\r\n        return (\r\n\r\n            <div>\r\n                <Head title=\"我的收藏\" show={true} search={true}></Head>\r\n                <div>\r\n                    <div className=\"cc-bigbox1\">\r\n                        {\r\n                            collectionList && collectionList.map((good, i) => {\r\n                                return (\r\n                                    <div key={i} className=\"cc-itemBox2\" >\r\n                                        <div>\r\n\r\n                                            <img src={good.image} alt=\"\" />\r\n                                            <p className=\"ccc-text\">  {good.name}</p>\r\n                                            <div className=\"ccc-pbox\">\r\n                                                <span className=\"ccc-price\">¥{good.price}.00</span>\r\n\r\n                                                <span className=\"ccc-sell\">{good.sellCount}人购买</span>\r\n                                            </div>\r\n                                            <Button className=\"ccc-del\" onClick={() => this.onClick(good.id)}>删除收藏</Button>\r\n                                        </div>\r\n\r\n                                    </div>\r\n\r\n                                )\r\n                            })\r\n\r\n                        }\r\n                        \r\n\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\nexport default Collection"],"sourceRoot":""}
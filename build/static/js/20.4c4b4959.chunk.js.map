{"version":3,"sources":["scripts/mobx/shopcar.js","scripts/components/foot/index.js","scripts/components/afoot/index.js","scripts/views/main/index.js"],"names":["Shopcar","carTotal","this","carList","forEach","item","count","total","checked","price","yh","data","totalcount","checkedList","carNum","quan","newVal","map","observable","value","label","title","msg1","msg2","action","url","a","async","axios","get","res","result","console","log","collectionList","post","then","filter","id","susult","flag","computed","foots","txt","path","name","icon","Component","Afoot","observer","state","selectedTab","hash","window","location","tab","split","setState","className","unselectedTintColor","tintColor","barTintColor","foot","i","Item","key","style","width","height","selectedIcon","selected","badge","length","shopcar","onPress","history","push","data-seed","contextTypes","PropTypes","object","Main","component","LazyLoad","render","to","props"],"mappings":"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","file":"static/js/20.4c4b4959.chunk.js","sourcesContent":["import { observable, action, computed, autorun } from \"mobx\"\r\nimport { axios } from \"&\"\r\nclass Shopcar {\r\n    @observable carList = [];  // 购物车数据 \r\n    // @observable carNum = 10;     // 购物车选中数量 \r\n    // @observable carTotal = 18;   // 购物车总数量 \r\n    @observable checkedList = [];\r\n    @observable collectionList = [];\r\n    // 结算购物车数据 \r\n    @observable data = [\r\n        {\r\n            value: 0, label: 'doctor', price: 10, title: '仅限普通花束使用',\r\n            msg1: '限2020-01-10至2020-02-31使用', msg2: '满300元可使用'\r\n        },\r\n        {\r\n            value: 1, label: 'bachelor', price: 10, title: '仅限普通花束使用',\r\n            msg1: '限2020-01-11至2020-02-31使用', msg2: '满300元可使用'\r\n        },\r\n    ];\r\n    @action getCarList = async (url) => {\r\n        const res = await axios.get(url);\r\n        this.carList = res.data.result;\r\n        console.log(this.carList)\r\n    }\r\n    @action getCollectionList = async (url) => {\r\n        const res = await axios.get(url);\r\n        this.collectionList = res.data.result;\r\n        console.log(this.collectionList)\r\n    }\r\n    @action delSelect = () => {\r\n        axios.post(\"/react/delSelect\").then(res => {\r\n            this.carList = this.carList.filter(item => !item.checked);\r\n        })\r\n\r\n    }\r\n    @action delCollection = (id) => {\r\n        axios.post(\"/react/delCollection\", { id }).then(res => {\r\n            this.collectionList = res.data.susult\r\n        })\r\n\r\n    }\r\n    @action changeOneCount = (id, flag) => {\r\n\r\n        axios.post(\"/react/changeCount\", {\r\n            id,\r\n            flag\r\n        }).then(res => {\r\n            this.carList = this.carList.map((item) => {\r\n                if (item.id == id) {\r\n                    item.count += flag ? 1 : -1;\r\n                }\r\n                return item;\r\n            })\r\n        })\r\n    }\r\n\r\n    @action changeOneCountNum = (id, count) => {\r\n        axios.post(\"/react/changeCount\", {\r\n            id,\r\n            count\r\n        }).then(res => {\r\n            this.carList = this.carList.map((item) => {\r\n                if (item.id == id) {\r\n                    item.count = count;\r\n                }\r\n                return item;\r\n            })\r\n        })\r\n    }\r\n\r\n    @action changeOneChecked = (checked, id) => {\r\n        axios.post(\"/react/changeChecked\", {\r\n            checked,\r\n            id\r\n        }).then(res => {\r\n            this.carList = this.carList.map((item) => {\r\n                if (item.id == id) {\r\n                    item.checked = checked\r\n                }\r\n                return item;\r\n            })\r\n        })\r\n\r\n    }\r\n    @action getChecked = () => {\r\n        axios.get(\"/react/getChecked\").then(res => {\r\n            // this.carList = this.carList.map((item)=>{\r\n            //     if(item.id==id){\r\n            //         item.checked = checked\r\n            //     }\r\n            //     return item;\r\n            // })\r\n            this.checkedList = res.data.result\r\n\r\n        })\r\n\r\n    }\r\n\r\n    @action changeQuan = checked => {\r\n        axios.post(\"/react/changeChecked\", {\r\n            checked,\r\n        }).then(res => {\r\n            this.quan = checked;\r\n        })\r\n\r\n    }\r\n    @computed get carTotal() {\r\n        var carTotal = 0;\r\n        this.carList.forEach((item) => {\r\n            carTotal += item.count;\r\n        })\r\n        return carTotal;\r\n    }\r\n    @computed get total() {\r\n        var total = 0;\r\n        this.carList.forEach((item) => {\r\n            if (item.checked) {\r\n                total += item.count * item.price;\r\n            }\r\n        })\r\n        return total;\r\n    }\r\n    @computed get yhq() {\r\n        var yh = 0;\r\n        this.data.forEach((item) => {\r\n\r\n            yh = item.price;\r\n\r\n        })\r\n        return yh;\r\n    }\r\n    @computed get totalcount() {\r\n        var totalcount = 0;\r\n        this.checkedList.forEach((item) => {\r\n            if (item.checked) {\r\n                totalcount += item.count * item.price;\r\n            }\r\n        })\r\n        return totalcount;\r\n    }\r\n    @computed get carNum() {\r\n        var carNum = 0;\r\n        this.carList.forEach((item) => {\r\n            if (item.checked) {\r\n                carNum += item.count;\r\n            }\r\n        })\r\n        return carNum;\r\n    }\r\n    @computed get quan() {\r\n        var quan = true;\r\n        this.carList.forEach(item => {\r\n            if (!item.checked) {\r\n                quan = false;\r\n            }\r\n        })\r\n        return quan;\r\n    }\r\n\r\n    set quan(newVal) {\r\n        this.carList = this.carList.map((item) => {\r\n            item.checked = newVal;\r\n            return item;\r\n        })\r\n    }\r\n}\r\nexport default new Shopcar()","import \"./index.scss\"\r\nimport React,{Component} from \"react\";\r\nimport {\r\n    NavLink\r\n} from \"react-router-dom\"\r\nimport {Badge} from \"antd-mobile\"\r\n\r\nexport const foots = [\r\n    {txt:\"首页\",path:\"/main/home\",name:\"home\",icon:\"icon-home\"},\r\n    {txt:\"商品\",path:\"/main/classify\",name:\"classify\",icon:\"icon-svgclassifyselect\"},\r\n    {txt:\"购物车\",path:\"/main/cart\",name:\"cart\",icon:\"icon-shop_car\"},\r\n    {txt:\"我\",path:\"/main/mine\",name:\"mine\",icon:\"icon-minefill\"}\r\n];\r\nexport class Foot extends Component{\r\n    state={\r\n        foots,\r\n        active:2\r\n    }\r\n\r\n    componentDidMount(){\r\n        console.log(\"mount\");\r\n        this.setState({\r\n            active:localStorage.active\r\n        })\r\n    }\r\n\r\n    handleChangeActive=(index)=>{\r\n        console.log(index);\r\n        localStorage.active = index;\r\n    }\r\n    render(){\r\n        const {\r\n            active,\r\n            foots\r\n        } = this.state\r\n        return(\r\n\r\n            <footer>\r\n\r\n                {\r\n                    foots.map((foot,i)=>{\r\n                        return(\r\n                            <div key={i}  onClick={()=>this.handleChangeActive(i)} >\r\n\r\n                                <NavLink activeClassName=\"nav-active\"  to={foot.path} >\r\n                                    <i className={\"iconfont \"+foot.icon}> </i>\r\n                                    <span> {foot.txt} </span>\r\n                                    {i==foots.length-2&&<Badge \r\n                                        text=\"8\" \r\n                                        className=\"hot\" \r\n                                        hot \r\n                                        style={{ \r\n                                        marginLeft: 12,\r\n                                        backgroundColor:active==2?\"red\":\"#999999\"\r\n                                     }} />}\r\n                                </NavLink>\r\n                            </div>\r\n                        )\r\n                    })\r\n                }\r\n            </footer>\r\n        )\r\n    }\r\n}","import \"./index.scss\";\r\nimport React,{Component} from \"react\";\r\nimport {foots} from \"../foot\"\r\n\r\nimport {\r\n    TabBar\r\n} from \"antd-mobile\"\r\nimport PropTypes from \"prop-types\"\r\nimport {history} from \"&\";\r\nimport {observer} from \"mobx-react\"\r\nimport shopcar from \"~/mobx/shopcar\"\r\n@observer\r\n class Afoot extends Component{\r\n    state = {\r\n        selectedTab:\"home\"\r\n    }\r\n   \r\n    componentDidMount(){\r\n        var hash = window.location.hash;\r\n        console.log(hash)\r\n        var tab = hash.split(\"#/main/\")[1];\r\n        this.setState({\r\n            selectedTab:tab\r\n        })\r\n    }\r\n\r\n    render(){\r\n      \r\n        return(\r\n            <div className=\"foot\">\r\n                 <TabBar\r\n                    unselectedTintColor=\"#949494\"\r\n                    tintColor=\"#414c3f\"\r\n                    barTintColor=\"white\"\r\n                    \r\n                >\r\n                    {\r\n                        foots.map((foot,i)=>{\r\n                            return (\r\n                                <TabBar.Item\r\n                                    title={foot.txt}\r\n                                    key={i}\r\n                                    icon={<i style={{\r\n                                    width: '22px',\r\n                                    height: '22px',\r\n                                     }}\r\n                                    className={\"iconfont \"+ foot.icon}\r\n                                    />\r\n                                    }\r\n                                    selectedIcon={<div style={{\r\n                                    width: '22px',\r\n                                    height: '22px',\r\n                                    }}\r\n                                    className={\"iconfont \"+ foot.icon}\r\n                                    />\r\n                                    }\r\n                                    selected={this.state.selectedTab==foot.name}\r\n                                    badge={i==foots.length-2&&shopcar.carTotal}\r\n                                    onPress={  () => {\r\n                                        this.setState({\r\n                                            selectedTab: foot.name,\r\n                                        }); \r\n                                        // this.props.history.push(foot.path);\r\n                                        // this.context.history.push(foot.path);\r\n                                        history.push(foot.path);\r\n\r\n\r\n                                    }}\r\n                                    data-seed=\"logId\"\r\n                                >\r\n\r\n                                </TabBar.Item>\r\n                            )\r\n                        })\r\n                    }\r\n                </TabBar>\r\n            </div>\r\n        )\r\n    }\r\n}\r\nAfoot.contextTypes = {\r\n    history:PropTypes.object\r\n}\r\nexport {Afoot}","import \"./index.scss\"\r\nimport React, {Component} from \"react\"\r\nimport {\r\n    Switch,\r\n    Route,\r\n    Redirect\r\n} from \"react-router-dom\"\r\nimport LazyLoad from \"&/lazyload\"\r\nimport {Foot} from \"~/components/foot\"\r\nimport {Afoot} from \"~/components/afoot\"\r\n\r\nexport default class Main extends Component{\r\n    render(){\r\n        return (\r\n            <div className=\"box\">\r\n              \r\n                <Switch>\r\n\r\n                    <Route path=\"/main/home\" component={LazyLoad(()=>import(\"../home\"))}/>\r\n                    <Route path=\"/main/classify\" component={LazyLoad(()=>import(\"../classify\"))}/>\r\n                    <Route path=\"/main/cart\" component={LazyLoad(()=>import(\"../cart\"))}/>\r\n                    <Route path=\"/main/mine\" component={LazyLoad(()=>import(\"../mine\"))}/>\r\n                    <Route render={()=>(<Redirect to=\"/main/home\" />  )}/>\r\n                </Switch>\r\n                <Afoot {...this.props}/>\r\n            </div>\r\n        )\r\n    }\r\n}"],"sourceRoot":""}